{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/artem/Study/isp/go_employment/frontend/app/dismissal-orders/%5Bid%5D/edit/page.tsx"],"sourcesContent":["\"use client\";\n\nimport Link from \"next/link\";\nimport { useEffect, useMemo, useState } from \"react\";\n\nconst orgOptions = [\n  { id: 1, title: \"ООО \\\"Пример\\\"\" },\n  { id: 2, title: \"АО \\\"Альфа\\\"\" },\n];\n\nconst contractBodies = [\n  {\n    id: 101,\n    worker: \"Иванов Иван Иванович\",\n    department: \"Отдел продаж\",\n    position: \"Менеджер\",\n  },\n  {\n    id: 102,\n    worker: \"Петров Петр Петрович\",\n    department: \"Отдел разработки\",\n    position: \"Инженер\",\n  },\n];\n\ntype BodyRow = {\n  contractBodyId?: number;\n  worker: string;\n  department: string;\n  position: string;\n  dismissalDate: string;\n  dismissalGround: string;\n  docNumber: string;\n  docDate: string;\n};\n\ntype HeaderState = {\n  number: string;\n  preparationDate: string;\n  organizationId?: number;\n};\n\nfunction loadExistingOrder(): { header: HeaderState; body: BodyRow[] } {\n  return {\n    header: {\n      number: \"DO-021\",\n      preparationDate: \"2025-03-01\",\n      organizationId: 1,\n    },\n    body: [\n      {\n        contractBodyId: 101,\n        worker: \"Иванов Иван Иванович\",\n        department: \"Отдел продаж\",\n        position: \"Менеджер\",\n        dismissalDate: \"2025-03-10\",\n        dismissalGround: \"Соглашение сторон\",\n        docNumber: \"15\",\n        docDate: \"2025-03-09\",\n      },\n    ],\n  };\n}\n\nexport default function DismissalOrderEditPage() {\n  const [header, setHeader] = useState<HeaderState>({\n    number: \"\",\n    preparationDate: \"\",\n    organizationId: undefined,\n  });\n\n  const emptyRow = (): BodyRow => ({\n    worker: \"\",\n    department: \"\",\n    position: \"\",\n    dismissalDate: \"\",\n    dismissalGround: \"\",\n    docNumber: \"\",\n    docDate: \"\",\n  });\n\n  const [rows, setRows] = useState<BodyRow[]>([emptyRow()]);\n\n  useEffect(() => {\n    const existing = loadExistingOrder();\n    setHeader(existing.header);\n    setRows(existing.body.length ? existing.body : [emptyRow()]);\n  }, []);\n\n  const contractOptions = useMemo(() => contractBodies, []);\n\n  const handleContractPick = (rowIndex: number, id: number) => {\n    const selected = contractBodies.find((c) => c.id === id);\n    if (!selected) return;\n    setRows((prev) =>\n      prev.map((row, idx) =>\n        idx === rowIndex\n          ? {\n              ...row,\n              contractBodyId: selected.id,\n              worker: selected.worker,\n              department: selected.department,\n              position: selected.position,\n            }\n          : row,\n      ),\n    );\n  };\n\n  const handleRowChange = (\n    rowIndex: number,\n    field: keyof BodyRow,\n    value: string,\n  ) => {\n    setRows((prev) =>\n      prev.map((row, idx) => (idx === rowIndex ? { ...row, [field]: value } : row)),\n    );\n  };\n\n  const addRow = () => setRows((prev) => [...prev, emptyRow()]);\n\n  const removeRow = (rowIndex: number) => {\n    setRows((prev) => (prev.length === 1 ? prev : prev.filter((_, idx) => idx !== rowIndex)));\n  };\n\n  return (\n    <div className=\"flex min-h-screen bg-zinc-950 p-8\">\n      <div className=\"w-full max-w-6xl space-y-6 mx-auto\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h1 className=\"text-3xl font-bold text-zinc-50\">Редактирование приказа об увольнении</h1>\n            <p className=\"text-zinc-400 mt-2\">Данные заглушка — подключите API для загрузки/сохранения.</p>\n          </div>\n          <Link\n            href=\"/dismissal-orders\"\n            className=\"text-sm text-emerald-400 hover:text-emerald-300\"\n          >\n            ← К списку\n          </Link>\n        </div>\n\n        <section className=\"space-y-4 rounded-xl border border-zinc-800 bg-zinc-900 p-6\">\n          <h2 className=\"text-lg font-semibold text-zinc-50\">Шапка документа</h2>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 items-end gap-4\">\n            <label className=\"space-y-2 text-sm text-zinc-200\">\n              <span>Номер документа</span>\n              <input\n                className=\"w-full rounded-lg border border-zinc-700 bg-zinc-950 px-3 py-2 text-sm text-zinc-50\"\n                value={header.number}\n                onChange={(e) => setHeader({ ...header, number: e.target.value })}\n              />\n            </label>\n            <label className=\"space-y-2 text-sm text-zinc-200\">\n              <span>Дата подготовки</span>\n              <input\n                type=\"date\"\n                className=\"w-full rounded-lg border border-zinc-700 bg-zinc-950 px-3 py-2 text-sm text-zinc-50\"\n                value={header.preparationDate}\n                onChange={(e) =>\n                  setHeader({ ...header, preparationDate: e.target.value })\n                }\n              />\n            </label>\n            <label className=\"space-y-2 text-sm text-zinc-200 md:col-span-2 lg:col-span-3\">\n              <span>Организация</span>\n              <select\n                className=\"w-full rounded-lg border border-zinc-700 bg-zinc-950 px-3 py-2 text-sm text-zinc-50\"\n                value={header.organizationId ?? \"\"}\n                onChange={(e) =>\n                  setHeader({ ...header, organizationId: Number(e.target.value) })\n                }\n              >\n                <option value=\"\" disabled>\n                  Выберите организацию\n                </option>\n                {orgOptions.map((org) => (\n                  <option key={org.id} value={org.id}>\n                    {org.title}\n                  </option>\n                ))}\n              </select>\n            </label>\n          </div>\n        </section>\n\n        <section className=\"space-y-4 rounded-xl border border-zinc-800 bg-zinc-900 p-6\">\n          <div className=\"flex items-center justify-between\">\n            <h2 className=\"text-lg font-semibold text-zinc-50\">Табличная часть</h2>\n            <p className=\"text-xs text-zinc-400\">Строки расширяются — один работник = одна строка</p>\n          </div>\n\n          <div className=\"overflow-hidden rounded-lg border border-zinc-800\">\n            <table className=\"min-w-full text-sm text-left\">\n              <thead className=\"bg-zinc-900/70\">\n                <tr>\n                  <th className=\"px-3 py-3 text-xs font-semibold uppercase tracking-wide text-zinc-400\">Работник</th>\n                  <th className=\"px-3 py-3 text-xs font-semibold uppercase tracking-wide text-zinc-400\">Подразделение</th>\n                  <th className=\"px-3 py-3 text-xs font-semibold uppercase tracking-wide text-zinc-400\">Должность</th>\n                  <th className=\"px-3 py-3 text-xs font-semibold uppercase tracking-wide text-zinc-400\">Дата расторжения</th>\n                  <th className=\"px-3 py-3 text-xs font-semibold uppercase tracking-wide text-zinc-400\">Основание</th>\n                  <th className=\"px-3 py-3 text-xs font-semibold uppercase tracking-wide text-zinc-400\">№ документа</th>\n                  <th className=\"px-3 py-3 text-xs font-semibold uppercase tracking-wide text-zinc-400\">Дата документа</th>\n                  <th className=\"px-3 py-3 text-xs font-semibold uppercase tracking-wide text-zinc-400\"></th>\n                </tr>\n              </thead>\n              <tbody>\n                {rows.map((row, idx) => (\n                  <tr key={idx} className={idx % 2 === 0 ? \"bg-zinc-900\" : \"bg-zinc-900/60\"}>\n                    <td className=\"px-3 py-3 text-zinc-100 align-top\">\n                      <select\n                        className=\"w-full rounded-lg border border-zinc-700 bg-zinc-950 px-3 py-2 text-sm text-zinc-50\"\n                        value={row.contractBodyId ?? \"\"}\n                        onChange={(e) => handleContractPick(idx, Number(e.target.value))}\n                      >\n                        <option value=\"\" disabled>\n                          Выберите работника\n                        </option>\n                        {contractOptions.map((contract) => (\n                          <option key={contract.id} value={contract.id}>\n                            {contract.worker}\n                          </option>\n                        ))}\n                      </select>\n                    </td>\n                    <td className=\"px-3 py-3 text-zinc-100\">\n                      <input\n                        className=\"w-full rounded-lg border border-zinc-700 bg-zinc-950 px-3 py-2 text-sm text-zinc-50\"\n                        value={row.department}\n                        onChange={(e) => handleRowChange(idx, \"department\", e.target.value)}\n                      />\n                    </td>\n                    <td className=\"px-3 py-3 text-zinc-100\">\n                      <input\n                        className=\"w-full rounded-lg border border-zinc-700 bg-zinc-950 px-3 py-2 text-sm text-zinc-50\"\n                        value={row.position}\n                        onChange={(e) => handleRowChange(idx, \"position\", e.target.value)}\n                      />\n                    </td>\n                    <td className=\"px-3 py-3 text-zinc-100\">\n                      <input\n                        type=\"date\"\n                        className=\"w-full rounded-lg border border-zinc-700 bg-zinc-950 px-3 py-2 text-sm text-zinc-50\"\n                        value={row.dismissalDate}\n                        onChange={(e) => handleRowChange(idx, \"dismissalDate\", e.target.value)}\n                      />\n                    </td>\n                    <td className=\"px-3 py-3 text-zinc-100\">\n                      <input\n                        className=\"w-full rounded-lg border border-zinc-700 bg-zinc-950 px-3 py-2 text-sm text-zinc-50\"\n                        value={row.dismissalGround}\n                        onChange={(e) => handleRowChange(idx, \"dismissalGround\", e.target.value)}\n                        placeholder=\"Основание\"\n                      />\n                    </td>\n                    <td className=\"px-3 py-3 text-zinc-100\">\n                      <input\n                        className=\"w-full rounded-lg border border-zinc-700 bg-zinc-950 px-3 py-2 text-sm text-zinc-50\"\n                        value={row.docNumber}\n                        onChange={(e) => handleRowChange(idx, \"docNumber\", e.target.value)}\n                      />\n                    </td>\n                    <td className=\"px-3 py-3 text-zinc-100\">\n                      <input\n                        type=\"date\"\n                        className=\"w-full rounded-lg border border-zinc-700 bg-zinc-950 px-3 py-2 text-sm text-zinc-50\"\n                        value={row.docDate}\n                        onChange={(e) => handleRowChange(idx, \"docDate\", e.target.value)}\n                      />\n                    </td>\n                    <td className=\"px-3 py-3 text-zinc-100 align-top\">\n                      <button\n                        type=\"button\"\n                        className=\"rounded-md border border-red-500/60 px-3 py-1 text-xs text-red-200 hover:border-red-400 hover:text-red-100\"\n                        onClick={() => removeRow(idx)}\n                      >\n                        Удалить\n                      </button>\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n\n          <button\n            type=\"button\"\n            className=\"mt-3 inline-flex items-center rounded-lg border border-zinc-700 px-4 py-2 text-sm text-zinc-100 hover:border-zinc-500\"\n            onClick={addRow}\n          >\n            Добавить строку\n          </button>\n        </section>\n\n        <div className=\"flex items-center justify-end gap-3\">\n          <Link\n            href=\"/dismissal-orders\"\n            className=\"rounded-lg border border-zinc-700 px-4 py-2 text-sm text-zinc-200 hover:border-zinc-500\"\n          >\n            Отменить\n          </Link>\n          <button\n            type=\"button\"\n            className=\"rounded-lg border border-emerald-600 bg-emerald-600 px-4 py-2 text-sm font-semibold text-white shadow hover:bg-emerald-500\"\n          >\n            Сохранить\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}